{% extends "heron/base_semantic.html" %}

{% load static %}
{% load filters_tags %}

{% block head_js %}
    <script type="text/javascript">
        function getSaleInvoicesPdf() {
            $(`.datatable-chargement`).show();
            let formData = {
                periode: $('.ui.dropdown').dropdown('get value')[1],
            };
            $.ajax({
                type: "POST",
                url: "{% url 'invoices:invoices_pdf_files' %}",
                data: formData,
                encode: true,
            }).done(function (data) {
                $("#pdfFiles").replaceWith(data.html)
                $(`.datatable-chargement`).hide();
            });
        }

    </script>
{% endblock head_js %}


{% block menu_principal %}
        {% include "heron/menu_principal.html" %}
{% endblock menu_principal %}

{% block content %}

    {% if user.is_authenticated %}
            {% include "invoices/invoices_pdf_list_entete.html" %}
        <div id="pdfFiles" style="padding: 0;margin: 0;">
            {% include "invoices/invoices_pdf_list_table.html" %}
        </div>
        <div class="ui equal width grid center"></div>

    {% else %}

        <br>
        <br>
        <hr>
        <br>
        <br>
        <p style="text-align: center;">Vous devez être connecté, pour pouvoir utiliser ce
            site</p>

{% endif %}


{% endblock content %}

{% block script %}

    <script>

        $(document).ready(function () {

            {% include "heron/base_data_table.html" %}

        });

    </script>

{% endblock script %}